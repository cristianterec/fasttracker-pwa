<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FastTrackers – Urgences</title>
<link rel="manifest" href="manifest.json" />
<!-- Apple icons for iOS homescreen -->
<link rel="apple-touch-icon" sizes="192x192" href="fasttrackers_icon.png" />
<link rel="apple-touch-icon" sizes="512x512" href="fasttrackers_icon.png" />
<!-- Favicon in tab -->
<link rel="icon" type="image/png" sizes="192x192" href="fasttrackers_icon.png" />
<link rel="icon" type="image/png" sizes="512x512" href="fasttrackers_icon.png" />
<!-- Styles -->
<link rel="stylesheet" href="styles.css" />
</head>
<body>
<!-- User Registration & Login (initial page) -->
<section id="auth" class="auth-screen">
  <div class="auth-card">
    <h1>Bienvenue sur FastTrackers</h1>
    <div id="auth-steps">
      <!-- Step 1: Select existing or register new -->
      <div id="auth-select" class="auth-step">
        <label>Choisissez ou créez un utilisateur</label>
        <select id="userSelect"></select>
        <button id="btnLogin" class="auth-btn primary">Se connecter</button>
        <button id="btnRegister" class="auth-btn secondary">Nouvel utilisateur</button>
      </div>
      <!-- Step 2: Register form -->
      <div id="registerForm" class="auth-step hidden">
        <label>Nom d'utilisateur</label>
        <input type="text" id="regName" placeholder="Nom" />
        <label>PIN (4 chiffres)</label>
        <input type="password" id="regPin" maxlength="4" placeholder="1234" />
        <label>Confirmer PIN</label>
        <input type="password" id="regPinConfirm" maxlength="4" placeholder="1234" />
        <button id="registerBtn" class="auth-btn primary">S'inscrire</button>
        <button id="backToLogin" class="auth-btn secondary">Retour</button>
      </div>
      <!-- Step 3: Login PIN -->
      <div id="loginPin" class="auth-step hidden">
        <p>Entrez votre PIN pour accéder</p>
        <input type="password" id="pinInput" maxlength="4" placeholder="1234" />
        <button id="doLogin" class="auth-btn primary">Se connecter</button>
        <button id="backToUserSelect" class="auth-btn secondary">Retour</button>
      </div>
    </div>
  </div>
</section>

<!-- Main Application -->
<section id="main" class="main-screen hidden">
  <header class="app-header">
    <div class="brand">⚡ FastTrackers</div>
    <div class="profile-controls">
      <span id="profile-name"></span>
      <button id="profileBtn">👤 Profil</button>
      <button id="logoutBtn">🔓 Déconnexion</button>
    </div>
  </header>
  <!-- Tabs navigation -->
  <nav class="tabs">
    <button class="tab active" data-tab="patients">👥 Patients</button>
    <button class="tab" data-tab="stats">📊 Statistiques</button>
    <button class="tab" data-tab="profile">👤 Profil</button>
  </nav>
  <!-- Patients Tab -->
  <div id="patients" class="tab-content active">
    <div class="patients-controls">
      <button id="transferBtn" class="control-btn" title="Relève Patients">🔄</button>
      <button id="notesToggleBtn" class="control-btn" title="Notes utiles">📝</button>
    </div>
    <div id="patientsGrid" class="grid"></div>
    <button id="addPatientBtn" class="add-btn">➕ Ajouter un patient</button>
    <!-- Transfer Panel -->
    <div id="transferPanel" class="popup hidden">
      <h3>Transférer Patients</h3>
      <div>
        <label>Sélectionner utilisateur</label>
        <select id="transferUserSelect"></select>
      </div>
      <div>
        <label>Patients à transférer</label>
        <div id="transferPatientsList" class="checkbox-group"></div>
      </div>
      <button id="confirmTransferBtn" class="control-btn">Transférer</button>
      <button id="cancelTransferBtn" class="control-btn">Annuler</button>
    </div>
    <!-- Notes Panel -->
    <div id="notesPanel" class="popup hidden">
      <h3>Notes personnelles</h3>
      <div id="notesList"></div>
      <textarea id="noteInput" rows="3" placeholder="Ajouter une note"></textarea>
      <button id="saveNoteBtn" class="control-btn">Enregistrer</button>
      <button id="closeNotesBtn" class="control-btn">Fermer</button>
    </div>
  </div>
  <!-- Stats Tab -->
  <div id="stats" class="tab-content hidden">
    <div class="charts-container">
      <!-- Placeholder for graphs, to be implemented with a library like Chart.js -->
      <canvas id="statsChart" width="600" height="400"></canvas>
    </div>
    <div class="stats-details">
      <h3>Statistiques par jour</h3>
      <div id="dailyStatsCarousel" class="carousel"></div>
      <button class="control-btn" id="refreshDailyStats">Recharger</button>
    </div>
  </div>
  <!-- Profile Tab -->
  <div id="profile" class="tab-content hidden">
    <h3>Gestion du profil</h3>
    <div class="profile-field">
      <label>Nom</label>
      <span id="profileNameDisplay"></span>
      <button id="editNameBtn" class="edit-btn">✏️</button>
    </div>
    <div class="profile-field">
      <label>PIN</label>
      <span id="profilePinDisplay">****</span>
      <button id="changePinBtn" class="edit-btn">🔑</button>
    </div>
    <button id="deleteProfileBtn" class="profile-btn danger">🗑️ Supprimer le profil</button>
    <button id="backToMainBtn" class="profile-btn">Retour à l'accueil</button>
  </div>
</section>

<!-- Scripts -->
<script>
  // Place the main JavaScript code here, or link to app.js after defining functionalities
</script>
</body>
</html>
